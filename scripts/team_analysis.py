from fantasy_premier_league import api
from fantasy_premier_league.analysis import chips, points

# team_ids = list(range(1, 27608))
# eliteserien_top_100_ids 
# team_ids = [9, 17, 22, 31, 33, 59, 70, 94, 96, 99, 112, 122, 174, 266, 330, 357, 390, 392, 426, 520, 554, 661, 680, 838, 973, 1074, 1292, 1458, 1592, 1601, 1668, 1846, 2048, 2109, 2286, 2353, 2456, 2729, 2783, 3096, 3146, 3147, 3425, 3441, 3614, 3642, 3810, 3981, 3991, 4205, 4427, 4604, 4611, 4851, 4854, 4910, 4930, 5155, 5227, 5959, 6258, 6366, 6449, 6756, 7343, 7949, 8155, 8784, 8957, 10591, 10773, 12200, 12208, 12355, 12627, 12729, 13329, 13730, 13795, 14222, 14325, 14356, 15025, 16139, 16502, 19501, 20060, 20915, 21014, 21518, 22238, 23104, 23262, 23389, 24479, 26199]
# allsvenskan top 100 ids
team_ids = [9, 11, 14, 19, 31, 172, 186, 188, 197, 536, 573, 649, 717, 766, 1079, 1119, 1133, 1228, 1312, 1554, 1585, 1687, 1694, 1715, 1832, 1925, 2034, 2152, 2192, 2217, 2279, 2501, 2616, 2674, 2687, 2842, 2979, 3235, 3371, 3432, 3561, 3580, 3581, 3588, 3617, 3667, 3892, 4035, 4288, 4317, 4517, 4769, 4898, 5357, 5546, 5635, 5688, 6084, 6304, 6475, 6830, 6893, 6943, 7029, 7071, 7852, 7887, 8600, 8652, 9102, 9411, 9456, 9967, 11030, 11271, 11702, 11948, 12163, 12384, 15474, 15896, 16413, 16655, 17473, 17903, 18825, 19019, 21209, 21348, 22031, 23286, 23387, 23433]
histories = api.get_league_team_histories(team_ids, 'ALLSVENSKAN', overwrite=False)
# print(chips.get_season_chip_usage(histories, percentage=False))
print(points.get_current_ranks(histories)[:20])